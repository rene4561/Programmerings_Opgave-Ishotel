<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Obligatorisk opgave - ishotel</title>
        <link rel="stylesheet" type="text/css" href="style.css">
    </head>
    <body>
            <section>
                <h1>Rum Status</h1>
                <!--<button onclick="changeColor()">Try it</button>-->
                <svg id="floorPlan"
                     class="statusGood2 statusGood4 statusGood6 statusGood8 statusGood10 statusGood12 statusGood14 statusGood1 statusGood3 statusGood5 statusGood7 statusGood9 statusGood11 statusGood13 statusGoodHall"
                     statusGood2="statusGood2"
                     statusProblem2="statusProblem2" 
                     statusAlert2="statusAlert2" 
                     xmlns="http://www.w3.org/2000/svg" viewBox="0 0 574.57 268.62">
                <title>floorplan</title>
                    <a href="detaljerRoom2.html"><g id="room2">
                      <path class="roomFill" d="M28.36,172.32v92.24a12,12,0,0,0,12,12H86.64a12,12,0,0,0,12-12V172.32Z" transform="translate(10.7 -9.44)"/>
                      <text class="roomText" transform="translate(71.12 208.2)">2</text>
                      <circle class="circleRoom2" cx="74.2" cy="230.32" r="4.8"/>
                    </g></a>
                    <g id="room4">
                      <path class="roomFill" d="M98.64,172.32v92.24a12,12,0,0,0,12,12h46.29a12,12,0,0,0,12-12V172.32Z" transform="translate(10.7 -9.44)"/>
                      <text class="roomText" transform="translate(141.41 208.2)">4</text>
                      <circle class="circleRoom4" cx="144.48" cy="230.32" r="4.8"/>
                    </g>
                    <g id="room6">
                      <path class="roomFill" d="M168.93,172.32v92.24a12,12,0,0,0,12,12h46.28a12,12,0,0,0,12-12V172.32Z" transform="translate(10.7 -9.44)"/>
                      <text class="roomText" transform="translate(212.41 208.2)">6</text>
                      <circle class="circleRoom6" cx="214.77" cy="230.32" r="4.8"/>
                    </g>
                    <g id="room8">
                      <path class="roomFill" d="M239.21,172.32v92.24a12,12,0,0,0,12,12h46.28a12,12,0,0,0,12-12V172.32Z" transform="translate(10.7 -9.44)"/>
                      <text class="roomText" transform="translate(282.29 208.2)">8</text>
                      <circle class="circleRoom8" cx="285.73" cy="230.32" r="4.8"/>
                    </g>
                    <g id="room10">
                      <path class="roomFill" d="M309.49,172.32v92.24a12,12,0,0,0,12,12h46.28a12,12,0,0,0,12-12V172.32Z" transform="translate(10.7 -9.44)"/>
                      <text class="roomText" transform="translate(349.86 208.2)">10</text>
                      <circle class="circleRoom10" cx="356.01" cy="230.32" r="4.8"/>
                    </g>
                    <g id="room12">
                      <path class="roomFill" d="M379.77,172.32v92.24a12,12,0,0,0,12,12h46.29a12,12,0,0,0,12-12V172.32Z" transform="translate(10.7 -9.44)"/>
                      <text class="roomText" transform="translate(420.5 208.2)">12</text>
                      <circle class="circleRoom12" cx="426.3" cy="230.32" r="4.8"/>
                    </g>
                    <g id="room14">
                      <path class="roomFill" d="M450.06,172.32v92.24a12,12,0,0,0,12,12h46.28a12,12,0,0,0,12-12V172.32Z" transform="translate(10.7 -9.44)"/>
                      <text class="roomText" transform="translate(489.74 208.2)">14</text>
                      <circle class="circleRoom14" cx="495.9" cy="230.32" r="4.8"/>
                    </g>
                    <g id="room1">
                      <path class="roomFill" d="M98.64,115.18V22.94a12,12,0,0,0-12-12H40.36a12,12,0,0,0-12,12v92.24Z" transform="translate(10.7 -9.44)"/>
                      <text class="roomText" transform="translate(71.12 46.98)">1</text>
                      <circle class="circleRoom1" cx="74.2" cy="70.05" r="4.8"/>
                    </g>
                    <g id="room3">
                      <path class="roomFill" d="M168.93,115.18V22.94a12,12,0,0,0-12-12H110.64a12,12,0,0,0-12,12v92.24Z" transform="translate(10.7 -9.44)"/>
                      <text class="roomText" transform="translate(141.41 46.98)">3</text>
                      <circle class="circleRoom3" cx="144.48" cy="70.05" r="4.8"/>
                    </g>
                    <g id="room5">
                      <path class="roomFill" d="M239.21,115.18V22.94a12,12,0,0,0-12-12H180.93a12,12,0,0,0-12,12v92.24Z" transform="translate(10.7 -9.44)"/>
                      <text class="roomText" transform="translate(212.41 46.98)">5</text>
                      <circle class="circleRoom5" cx="214.77" cy="70.05" r="4.8"/>
                    </g>
                    <g id="room7">
                      <path class="roomFill" d="M309.49,115.18V22.94a12,12,0,0,0-12-12H251.21a12,12,0,0,0-12,12v92.24Z" transform="translate(10.7 -9.44)"/>
                      <text class="roomText" transform="translate(282.29 46.98)">7</text>
                      <circle class="circleRoom7" cx="285.73" cy="70.05" r="4.8"/>
                    </g>
                    <g id="room9">
                      <path class="roomFill" d="M379.77,115.18V22.94a12,12,0,0,0-12-12H321.49a12,12,0,0,0-12,12v92.24Z" transform="translate(10.7 -9.44)"/>
                      <text class="roomText" transform="translate(352.93 46.98)">9</text>
                      <circle class="circleRoom9" cx="356.01" cy="70.05" r="4.8"/>
                    </g>
                    <g id="room11">
                      <path class="roomFill" d="M450.06,115.18V22.94a12,12,0,0,0-12-12H391.77a12,12,0,0,0-12,12v92.24Z" transform="translate(10.7 -9.44)"/>
                      <text class="roomText" transform="translate(420.5 46.98)">11</text>
                      <circle class="circleRoom11" cx="426.3" cy="70.05" r="4.8"/>
                    </g>
                    <g id="room13">
                      <path class="roomFill" d="M520.34,115.18V22.94a12,12,0,0,0-12-12H462.06a12,12,0,0,0-12,12v92.24Z" transform="translate(10.7 -9.44)"/>
                      <text class="roomText" transform="translate(489.74 46.98)">13</text>
                      <circle class="circleRoom13" cx="495.9" cy="70.05" r="4.8"/>
                    </g>
                  <g id="hallway">
                    <rect id="shape" class="roomFill" x="18.3" y="106.75" width="541.51" height="56.13" rx="12"/>
                    <circle class="circleRoomHall" cx="281.85" cy="134.31" r="4.8"/>
                    <text class="roomText" transform="translate(295.49 138.59)">Hall<tspan class="cls-7" x="19.27" y="0">w</tspan><tspan class="cls-8" x="28.06" y="0">a</tspan><tspan x="33.75" y="0">y</tspan></text>
                  </g>
                  <g id="doors">
                    <g>
                      <rect class="doorFill" x="83" y="95.96" width="18.23" height="23"/>
                      <rect class="doorFill" x="154.04" y="95.96" width="18.23" height="23"/>
                      <rect class="doorFill" x="223.59" y="95.96" width="18.23" height="23"/>
                      <rect class="doorFill" x="294.63" y="95.96" width="18.23" height="23"/>
                      <rect class="doorFill" x="363.27" y="95.96" width="18.23" height="23"/>
                      <rect class="doorFill" x="434.31" y="95.96" width="18.23" height="23"/>
                      <rect class="doorFill" x="505.33" y="95.47" width="18.23" height="23"/>
                    </g>
                    <g>
                      <rect class="doorFill" x="82" y="151.62" width="18.23" height="23"/>
                      <rect class="doorFill" x="153.04" y="151.62" width="18.23" height="23"/>
                      <rect class="doorFill" x="222.59" y="151.62" width="18.23" height="23"/>
                      <rect class="doorFill" x="293.63" y="151.62" width="18.23" height="23"/>
                      <rect class="doorFill" x="362.27" y="151.62" width="18.23" height="23"/>
                      <rect class="doorFill" x="433.31" y="151.62" width="18.23" height="23"/>
                      <rect class="doorFill" x="504.33" y="151.13" width="18.23" height="23"/>
                    </g>
                    <rect class="doorFill" y="118.96" width="32.66" height="32.66"/>
                    <rect class="doorFill" x="541.91" y="118.96" width="32.66" height="32.66"/>
                  </g>
                </svg>
            </section>
        <script>
            /*JSON array*/
            function loadDoc(){
                let xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function(){
                    if (this.readyState == 4 && this.status == 200){
                        let myObj = JSON.parse(this.responseText);
                        skiftFarve(myObj);
                    }
                };
                xhttp.open("POST", "senesteData.php?s=lufttemperatur&sys=IdaErin", true);
                xhttp.send();
            }
            
            function skiftFarve(inputData){
                
                let temperatur = [];
                let floorPlan = document.getElementById("floorPlan");
            
                temperatur.push(inputData[0].value);

                if(temperatur >= 21.9 && temperatur <= 22.9){
                    floorPlan.classList.add(this.getAttribute("statusGood2"));
                    floorPlan.classList.remove(this.getAttribute("statusProblem2"));
                    floorPlan.classList.remove(this.getAttribute("statusAlert2"));
                    
                } else if (temperatur >= 23 && temperatur <= 24.9 || temperatur >= 19 && temperatur <= 21.8){
                    floorPlan.classList.add(this.getAttribute("statusProblem2"));
                    floorPlan.classList.remove(this.getAttribute("statusGood2"));
                    floorPlan.classList.remove(this.getAttribute("statusAlert2"));
                } else if (temperatur >= 25 || temperatur <= 18) {
                    floorPlan.classList.add(this.getAttribute("statusAlert2"));
                    floorPlan.classList.remove(this.getAttribute("statusProblem2"));
                    floorPlan.classList.remove(this.getAttribute("statusGood2"));
                }
            
            }  
            /*AJAX*/
            loadDoc();
            setInterval(loadDoc, 1000)
        </script>
    </body>
</html>